# Telegram Pictionary It (Backend)

This a backend for Telegram Mini App "Pictionary It".

Check [this](https://github.com/hedhyw/telegram-pictionary-it) if you want to run this backend with [the frontend](https://github.com/hedhyw/telegram-pictionary-it-frontend).

## Requirements

- [go](https://go.dev/doc/install).
- [make](https://en.wikipedia.org/wiki/Make_(software)).

## Running

```shell
# Prepare config.
cp .env.example .env

# Pull dependencies.
make vendor

# Run the server. Make sure that the port :8081 is available.
make run

# Check that it works.
curl http://localhost:8081/debug/health
```

## Project structure

- [internal/transport](internal/transport) - HTTP/WebSocket/TelegramBot handlers.
- [internal/domain](internal/domain) - business logic.
    - [internal/domain/core](internal/domain/core) - the holder of games.
    - [internal/domain/game](internal/domain/game) - game logic.
    - [internal/domain/telegram](internal/domain/telegram) - the package for decoding/verifying Telegram's `*InitData`.
- [internal/config](internal/config) - environment configuration.
- [internal/assets/words.txt](internal/assets/words.txt) - the list of words for gameplay.
- [features](features) - behavior-driven development tests generated by [gherkingen](https://github.com/hedhyw/gherkingen).

## MiniApp data verification

An example of validating data received through the Telegram Mini App can be found [here](internal/domain/telegram/telegram.go).

## Docker image

In order to build and push the backend docker image, declare the following variables in [.env](.env):

```
IMAGE=image_name_change_it
```

Then run:
```shell
make image
```

## License

[MIT](./LICENSE).
